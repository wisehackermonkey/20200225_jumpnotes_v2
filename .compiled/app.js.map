{"version":3,"sources":["../server/app.js"],"names":["PORT","EMPTY_DB_SCHEMA","notes","DATABASE_PATH","adapter","FileSync","app","db","use","express","static","urlencoded","post","req","res","console","log","url","note_text","body","notefields","result_message","JSON","stringify","send","SetupDatabase","listen","schema","defaults","write","SaveNoteDatabase","get","push","text","time","Date","now"],"mappings":";;AAsBA;;;;AACA;;;;AACA;;;;;;AAKA;AACA,IAAMA,OAAO,IAAb,C,CAPwB;AAvBxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAUA,IAAMC,kBAAkB,EAACC,OAAM,EAAP,EAAxB;AACA,IAAMC,gBAAgB,cAAtB;;AAEA;AACA,IAAMC,UAAU,IAAIC,kBAAJ,CAAaF,aAAb,CAAhB;AACA,IAAMG,MAAM,wBAAZ;AACA,IAAMC,KAAK,qBAAIH,OAAJ,CAAX;;AAEA;AACA;AACAE,IAAIE,GAAJ,CAAQC,kBAAQC,MAAR,CAAe,KAAf,CAAR;AACAJ,IAAIE,GAAJ,CAAQC,kBAAQE,UAAR,EAAR;;AAOAL,IAAIM,IAAJ,CAAS,gBAAT,EAA2B,UAACC,GAAD,EAAKC,GAAL,EAAW;AAClCC,YAAQC,GAAR,CAAYH,IAAII,GAAhB;;AAEA,QAAIC,YAAYL,IAAIM,IAAJ,CAASC,UAAzB;AACAL,YAAQC,GAAR,CAAYE,SAAZ;AACA;AACA,QAAIG,iBAAiB,qCAAoCC,KAAKC,SAAL,CAAeV,IAAIM,IAAnB,CAAzD;AACAJ,YAAQC,GAAR,CAAYK,cAAZ;AACAP,QAAIU,IAAJ,CAASH,cAAT;AACH,CATD;;AAaAN,QAAQC,GAAR,CAAY,kCAAZ;;AAEAS,cAAcxB,eAAd;;AAGAK,IAAIoB,MAAJ,CAAW1B,IAAX,EAAgB,YAAI;AAChBe,YAAQC,GAAR,CAAY,WAAZ;AACAD,YAAQC,GAAR,+CAAwDhB,IAAxD;AACH,CAHD;;AAMA;AACA,SAASyB,aAAT,CAAuBE,MAAvB,EAA8B;AAC1BpB,OAAGqB,QAAH,CAAYD,MAAZ,EAAoBE,KAApB;AACH;;AAED,SAASC,gBAAT,CAA0BZ,SAA1B,EAAoC;AAC/B;AACAX,OAAGwB,GAAH,CAAO,OAAP,EACCC,IADD,CACO,EAAEC,MAAMf,SAAR,EAAmBgB,MAAMC,KAAKC,GAAL,EAAzB,EADP,EAECP,KAFD;AAGJ","file":"app.js","sourcesContent":["//jumpnotes try number 2 \r\n//a notetaking app using a web page as the gui, and a nodejs backend \r\n//by wisehackermonkey oran c\r\n//20200225\r\n//x web page with text box\r\n//  api endpoint\r\n//  save to json function\r\n// dockerize\r\n//  host\r\n// x finish form setup [https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/forms]\r\n// - button save\r\n\r\n\r\n// x setup\r\n//x  api endpoint for form\r\n//x  webpage static routing\r\n//x webpage form\r\n//  databse save notes from form\r\n//  ----feature creap\r\n// view saved notes\r\n// webpage css flex box for notes\r\n// edit on notes when clicked\r\nimport express from \"express\"\r\nimport low from \"lowdb\" //https://github.com/typicode/lowdb\r\nimport FileSync from \"lowdb/adapters/FileSync\"\r\n\r\n\r\n\r\n\r\n//settings\r\nconst PORT = 3000\r\nconst EMPTY_DB_SCHEMA = {notes:[]}\r\nconst DATABASE_PATH = './db/db.json'\r\n\r\n//library setup\r\nconst adapter = new FileSync(DATABASE_PATH)\r\nconst app = express()\r\nconst db = low(adapter)\r\n\r\n// library setup oneliners\r\n//static host main page\r\napp.use(express.static(\"web\"))\r\napp.use(express.urlencoded())\r\n\r\n\r\n\r\n\r\n\r\n\r\napp.post(\"/v1/note-save/\", (req,res)=>{\r\n    console.log(req.url)\r\n\r\n    let note_text = req.body.notefields\r\n    console.log(note_text)\r\n    // SaveNoteDatabase()\r\n    let result_message = \"Note has been saved to database:\" +JSON.stringify(req.body)\r\n    console.log(result_message)\r\n    res.send(result_message);\r\n})\r\n\r\n\r\n\r\nconsole.log(\"Jumpnotes server v2: Starting...\")\r\n\r\nSetupDatabase(EMPTY_DB_SCHEMA)\r\n\r\n\r\napp.listen(PORT,()=>{\r\n    console.log(\"Running..\")\r\n    console.log(`jumpnotes is running on http://localhost:${PORT}`)\r\n})\r\n\r\n\r\n//database functionality\r\nfunction SetupDatabase(schema){\r\n    db.defaults(schema).write()\r\n}\r\n\r\nfunction SaveNoteDatabase(note_text){\r\n     //save note to json database\r\n     db.get(\"notes\")\r\n     .push( { text: note_text, time: Date.now()})\r\n     .write()\r\n}"]}